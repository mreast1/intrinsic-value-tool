async function calc() { const symbol = document.getElementById("stock").value; const growth = Number(document.getElementById("growth").value || 10); const res = await fetch(`/api/stock?symbol=${symbol}`); const data = await res.json(); const price = data.price; const eps = data.eps; const intrinsic = eps * (8.5 + 2 * growth); const gap = ((intrinsic - price) / price) * 100; document.getElementById("price").innerText = price.toFixed(2); document.getElementById("eps").innerText = eps.toFixed(2); document.getElementById("iv").innerText = intrinsic.toFixed(2); document.getElementById("gap").innerText = gap.toFixed(2); document.getElementById("signal").innerText = gap > 20 ? "BUY" : gap < -20 ? "SELL" : "HOLD"; }
